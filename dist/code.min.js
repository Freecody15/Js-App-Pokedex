const pokemonRepository = function () { const t = [], e = "https://pokeapi.co/api/v2/pokemon/?limit=150"; function n(e) { t.push(e) } async function o(t) { const e = t.detailsUrl; try { const n = await fetch(e), o = await n.json(); t.imageUrl = o.sprites.front_default, t.height = o.height, t.weight = o.weight, t.types = o.types } catch (t) { console.error(t) } } function a(t) { o(t).then(() => { !function (t) { const e = $(".modal-title"), n = $(".modal-body"), o = $(`<h2>${t.name}</h2>`), a = $(`<p>${t.height}m` + "</p>"), i = $(`<p>${t.weight}kg` + "<p>"), s = $("<img class='pokemon-modal-image'>"); s.attr("src", t.imageUrl); const r = $("<img class='pokemon-modal-image'>"); r.attr("src", t.imageUrlBack); const c = document.createElement("p"); t.types.forEach((e, n) => { n === t.types.length - 1 ? c.innerText += e.type.name : c.innerText += `${e.type.name}, ` }), e.empty(), n.empty(), e.append(o), n.append(s), n.append(r), n.append(c), n.append(a), n.append(i) }(t) }) } return $(document).ready(() => { $("#myInput").on("keyup", function () { const t = $(this).val().toLowerCase(); $(".search-button").filter(function () { $(this).toggle($(this).text().toLowerCase().indexOf(t) > -1) }) }) }), { add: n, getAll: function () { return t }, addListItem: function (t) { const e = document.querySelector(".list-group"), n = document.createElement("li"); n.classList.add("group-list-item"); const o = document.createElement("button"); o.innerText = t.name, o.classList.add("btn-primary", "search-button"), o.setAttribute("data-toggle", "modal"), o.setAttribute("data-target", "#pokemonModal"), n.append(o), e.append(n), o.addEventListener("click", e => { a(t) }) }, loadList: function () { return fetch(e).then(t => t.json()).then(t => { t.results.forEach(t => { n({ name: t.name, detailsUrl: t.url }) }) }).catch(t => { console.error(t) }) }, loadDetails: o, showDetails: a } }(); pokemonRepository.loadList().then(() => { pokemonRepository.getAll().forEach(t => { pokemonRepository.addListItem(t) }) });